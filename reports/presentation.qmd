---
title: "Crime Prevention Centers"
subtitle: "A Data Storytelling Project"
author: "by Esad Skenderi & Hendrik Pfeifer"
format:
  revealjs:
    embed-resources: true
    theme: dark
    slide-number: true
    smaller: true
    preview-links: auto
    footer: "Data Storytelling - WiSe 2022/23 - Prof. Dr. Jan Kirenz"
resources: ex_6_6-presentation
---

## Topic & Motivation {.smaller}

::: {.fragment .fade-in-then-semi-out}
- Team tasked with fighting crime in Chicago City.
:::

::: {.fragment .fade-in-then-semi-out}
- Previous measures ineffective, new solution needed.
:::

::: {.fragment .fade-in-then-semi-out}
- Crime Prevention Centers as a contact point for all community members (all ages, ethnic and religious backgrounds).
:::

::: {.fragment .fade-in-then-semi-out}
- Centers offer workshops, training, self-help groups, and activities such as sports, music and art.
:::

::: {.fragment .fade-in-then-semi-out}
- Focus on prevention and understanding addiction instead of punishment.
:::

::: {.fragment .fade-in-then-semi-out}
- Giving people from difficult backgrounds a perspective.
:::

::: {.fragment .fade-in-then-semi-out}
- Goal: create a safer and more inclusive city for all residents.
:::
 


## Data{.smaller}

::: {.fragment .fade-in-then-semi-out}
- Dataset reflects reported incidents of crime that occurred in the City of Chicago from 2001 to present.
:::

::: {.fragment .fade-in-then-semi-out}
- Data is extracted from the Chicago Police Department's. 
:::

::: {.fragment .fade-in-then-semi-out}
- Focus on 2018 + 2019, otherwise there would be too much data.
:::

::: {.fragment .fade-in-then-semi-out}
- Prepared into 11 columns
:::

::: {.fragment .fade-in-then-semi-out}
<img src="dfhead.png">

:::


## Exploratory Data Analysis{ .smaller}

:::: {.columns} 

::: {.column width="50%"}

```{python}
from pathlib import Path

PARENT_PATH = str(Path().resolve().parent) + "/"
PATH = "data/"
SUBPATH = "processed/"
FILE = "chicago_crimes-20230130-1108"
FORMAT = ".csv"

import altair as alt
from vega_datasets import data
alt.data_transformers.disable_max_rows()

import warnings
warnings.simplefilter(action='ignore', category=FutureWarning)

import pandas as pd

#load crime dataset
df = pd.read_csv(PARENT_PATH + PATH + SUBPATH + FILE + FORMAT)

#Geopandas library to work with Chicago map
import geopandas as gpd

PARENT_PATH = str(Path().resolve().parent) + "/"
PATH = "data/"
SUBPATH = "external/"
FILE = "wards"
FORMAT = ".shp"

#load map dataset
gdf = gpd.read_file(PARENT_PATH + PATH + SUBPATH + FILE + FORMAT)

#drop observations which did not made it into our report
df.drop(['id', 'ward', 'day'], axis=1, inplace=True)


cat_list = ["block","primary_type", "primary_group", "district", "year", "month", "hour"]

#convert to category
for i in cat_list:
    df[i] = df[i].astype("category")

date_list = ["date"]

#convert date to datetime
for i in date_list:
    df[i] = df[i].astype("datetime64")

# Distribution of crimes over the two years (2018 + 2019)
chart_3 = alt.Chart(df).mark_bar().encode(
    y=alt.Y('year:N',
            axis=alt.Axis(title="YEAR",
                          titleY=15)),
    x=alt.X('count(primary_type)',
            axis=alt.Axis(title = "COUNT", 
                          titleAnchor="start")),
).properties(
    title='Count of committed crime per year',
    width=400,
    height=200
)


chart_3.configure_title(
    fontSize=16,
    font='Arial',
    color='black',
    anchor='start'
).configure_axis(grid=False
).configure_view(strokeOpacity=0)


```

```{python}
from pathlib import Path

PARENT_PATH = str(Path().resolve().parent) + "/"
PATH = "data/"
SUBPATH = "processed/"
FILE = "chicago_crimes-20230130-1108"
FORMAT = ".csv"

import altair as alt
from vega_datasets import data
alt.data_transformers.disable_max_rows()

import warnings
warnings.simplefilter(action='ignore', category=FutureWarning)

import pandas as pd

#load crime dataset
df = pd.read_csv(PARENT_PATH + PATH + SUBPATH + FILE + FORMAT)


#drop observations which did not made it into our report
df.drop(['id', 'ward', 'day'], axis=1, inplace=True)



df["primary_type"].describe()


```

:::

::: {.column width="50%"}

::: {.fragment .fade-in-then-semi-out}
- 76362 registered crimes in 2018 and 2019
:::

::: {.fragment .fade-in-then-semi-out}
- Registered 10 different types of crime
:::

::: {.fragment .fade-in-then-semi-out}
- 62 out of 159 homocides let to an arrest
:::

::: {.fragment .fade-in-then-semi-out}
- 4167 out of 4170 incidents with narcotics led to an arrest
:::

::: {.fragment .fade-in-then-semi-out}
- Theft and assault and battery account for over 50% of all registered crimes

:::

:::

::::



## Findings {.smaller}

:::: {.columns} 

::: {.column width="50%"}



```{python}
from pathlib import Path

PARENT_PATH = str(Path().resolve().parent) + "/"
PATH = "data/"
SUBPATH = "processed/"
FILE = "chicago_crimes-20230130-1108"
FORMAT = ".csv"

import altair as alt
from vega_datasets import data
alt.data_transformers.disable_max_rows()

import warnings
warnings.simplefilter(action='ignore', category=FutureWarning)

import pandas as pd

#load crime dataset
df = pd.read_csv(PARENT_PATH + PATH + SUBPATH + FILE + FORMAT)

#Geopandas library to work with Chicago map
import geopandas as gpd

PARENT_PATH = str(Path().resolve().parent) + "/"
PATH = "data/"
SUBPATH = "external/"
FILE = "wards"
FORMAT = ".shp"

#load map dataset
gdf = gpd.read_file(PARENT_PATH + PATH + SUBPATH + FILE + FORMAT)

#drop observations which did not made it into our report
df.drop(['id', 'ward', 'day'], axis=1, inplace=True)


cat_list = ["block","primary_type", "primary_group", "district", "year", "month", "hour"]

#convert to category
for i in cat_list:
    df[i] = df[i].astype("category")

date_list = ["date"]

#convert date to datetime
for i in date_list:
    df[i] = df[i].astype("datetime64")



#map of chicago (interactive)
#map
choro = alt.Chart(gdf).mark_geoshape(
    fill="white", stroke='grey'
).encode()

#selection




#squares
p = alt.Chart(df).mark_square(opacity=0.3).encode(
        longitude='longitude', 
        latitude='latitude', 
        size=alt.value(5),
        color=alt.Color("primary_group:N", legend=alt.Legend(title="GROUP", orient='none', legendX=340, legendY=10)),
        tooltip=["district", "block", "primary_type"]
).properties(
    title="Locations of crimes in Chicago City",
    width=400,
    height=500)
    
layer = alt.layer(choro + p
).configure_title(
    fontSize=16,
    font='Arial',
    color='black',
    anchor='start'
).configure_axis(grid=False
).configure_view(strokeOpacity=0)

layer




```


:::

::: {.column width="50%"}

::: {.fragment .fade-in-then-semi-out}
- Several hotspots across the city
:::

::: {.fragment .fade-in-then-semi-out}
- Districts 11, 6, 8, 1 and 18 are the most criminal
:::

::: {.fragment .fade-in-then-semi-out}
- Inner districts: lighter crimes: "group 1"
- Outer districts: more serious crimes: "group 2"
:::

::: {.fragment .fade-in-then-semi-out}
- Most crimes happen during the day between 9 am and 7 pm 

:::

:::

::::


## Conclusions + recommended action {.smaller}

:::: {.columns} 

::: {.column width="50%"}

::: {.fragment .fade-in-then-semi-out}
- We are able to answer the questions:

:::

::: {.fragment .fade-in-then-semi-out}
- “Which kind of crimes happen particularly frequently and where/when do they happen?”
:::

::: {.fragment .fade-in-then-semi-out}
- “Where the new Crime Prevention Centers should be built in Chicago?”
:::

::: {.fragment .fade-in-then-semi-out}
- City council needs to react to prevent or lower crimes in Chicago 
:::


:::

::: {.column width="50%"}

::: {.fragment .fade-in-then-semi-out}
- We recommend to build at least 5 Crime Prevention Centers
:::

::: {.fragment .fade-in-then-semi-out}
- In the 5 most criminal districts (11, 6, 8, 1 and 18)
:::

::: {.fragment .fade-in-then-semi-out}
- Individual focus on crime prevention per district
:::

::: {.fragment .fade-in-then-semi-out}
- E.g.: Focus on nacrotics in district 11 and focus on theft in district 1
:::

::: {.fragment .fade-in-then-semi-out}
- Opening hours from 9 am to 8 pm

:::

:::

::::