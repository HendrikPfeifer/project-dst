---
title: "Crime Prevention Centers"
subtitle: "A Data Storytelling Project"
author: "by Esad Skenderi & Hendrik Pfeifer"
format:
  revealjs:
    embed-resources: true
    theme: dark
    slide-number: true
    smaller: true
    preview-links: auto
    footer: "Data Storytelling - WiSe 2022/23 - Prof. Dr. Jan Kirenz"
resources: ex_6_6-presentation
---

## Topic & Motivation {.smaller}


## Data{.smaller}


## Exploratory Data Analysis{ .smaller}


## Findings {.smaller}

:::: {.columns} 

::: {.column width="50%"}



```{python}
from pathlib import Path

PARENT_PATH = str(Path().resolve().parent) + "/"
PATH = "data/"
SUBPATH = "processed/"
FILE = "chicago_crimes-20230130-1108"
FORMAT = ".csv"

import altair as alt
from vega_datasets import data
alt.data_transformers.disable_max_rows()

import warnings
warnings.simplefilter(action='ignore', category=FutureWarning)

import pandas as pd

#load crime dataset
df = pd.read_csv(PARENT_PATH + PATH + SUBPATH + FILE + FORMAT)

#Geopandas library to work with Chicago map
import geopandas as gpd

PARENT_PATH = str(Path().resolve().parent) + "/"
PATH = "data/"
SUBPATH = "external/"
FILE = "wards"
FORMAT = ".shp"

#load map dataset
gdf = gpd.read_file(PARENT_PATH + PATH + SUBPATH + FILE + FORMAT)

#drop observations which did not made it into our report
df.drop(['id', 'ward', 'day'], axis=1, inplace=True)


cat_list = ["block","primary_type", "primary_group", "district", "year", "month", "hour"]

#convert to category
for i in cat_list:
    df[i] = df[i].astype("category")

date_list = ["date"]

#convert date to datetime
for i in date_list:
    df[i] = df[i].astype("datetime64")



#map of chicago (interactive)
#map
choro = alt.Chart(gdf).mark_geoshape(
    fill="white", stroke='grey'
).encode()

#selection




#squares
p = alt.Chart(df).mark_square(opacity=0.3).encode(
        longitude='longitude', 
        latitude='latitude', 
        size=alt.value(5),
        color=alt.Color("primary_group:N", legend=alt.Legend(title="GROUP", orient='none', legendX=340, legendY=10)),
        tooltip=["district", "block", "primary_type"]
).properties(
    title="Locations of crimes in Chicago City",
    width=400,
    height=500)
    
layer = alt.layer(choro + p
).configure_title(
    fontSize=16,
    font='Arial',
    color='black',
    anchor='start'
).configure_axis(grid=False
).configure_view(strokeOpacity=0)

layer




```


:::

::: {.column width="50%"}

::: {.fragment .fade-in-then-semi-out}
- Several hotspots across the city
:::

::: {.fragment .fade-in-then-semi-out}
- Districts 11, 6, 8, 1 and 18 are the most criminal
:::

::: {.fragment .fade-in-then-semi-out}
- Inner districts: lighter crimes: "group 1"
- Outer districts: more serious crimes: "group 2"
:::

::: {.fragment .fade-in-then-semi-out}
- Most crimes happen during the day between 9 am and 7 pm 

:::

:::

::::


## Conclusions + recommended action {.smaller}